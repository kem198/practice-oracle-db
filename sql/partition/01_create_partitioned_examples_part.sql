-- @/sql/partition/01_create_partitioned_examples_part.sql
-- パーティションを持つテーブルを作成
CREATE TABLE
    APPUSER.PARTITIONED_EXAMPLES (
        ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
        NAME VARCHAR2(100) NOT NULL,
        CREATED_BY VARCHAR2(50) NOT NULL,
        CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
PARTITION BY
    RANGE (CREATED_AT) (
        PARTITION p2023
        VALUES
            LESS THAN (TO_DATE('2024-01-01', 'YYYY-MM-DD')),
            PARTITION p2024
        VALUES
            LESS THAN (TO_DATE('2025-01-01', 'YYYY-MM-DD')),
            PARTITION pmax
        VALUES
            LESS THAN (MAXVALUE)
    )
;

-- レコードを挿入
INSERT INTO
    APPUSER.PARTITIONED_EXAMPLES (NAME, CREATED_BY)
VALUES
    ('Alice', 'admin')
;

INSERT INTO
    APPUSER.PARTITIONED_EXAMPLES (NAME, CREATED_BY)
VALUES
    ('Bob', 'admin')
;

INSERT INTO
    APPUSER.PARTITIONED_EXAMPLES (NAME, CREATED_BY)
VALUES
    ('Charlie', 'system')
;

-- 確認
SELECT
    *
FROM
    APPUSER.PARTITIONED_EXAMPLES
;
